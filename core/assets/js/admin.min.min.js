jQuery(document).ready(function(y){y(document).on("click",".cmplz-tablinks",function(){y(".cmplz-tablinks").removeClass("active");y(this).addClass("active");y(".cmplz-tabcontent").removeClass("active");y("#"+y(this).data("tab")).addClass("active")});window.setTimeout(function(){y(".cmplz-hide").fadeTo(500,0).slideUp(500,function(){y(this).remove()})},2000);y(document).on("click",".cmplz-panel-toggle",function(){var b=y(this).closest(".cmplz-slide-panel").find(".cmplz-panel-content");var a=y(this).closest(".cmplz-slide-panel").find("i.toggle");if(b.is(":hidden")){a.removeClass("fa-caret-right");a.addClass("fa-caret-down");b.slideDown("fast")}else{b.slideUp("fast");a.removeClass("fa-caret-down");a.addClass("fa-caret-right")}});y(document).on("click",".cmplz-open-modal",function(a){a.preventDefault();var c=y(this).closest(".field-group");var b=c.find(".cmplz-field");var d=c.find(".cmplz-help-modal");y(".cmplz-field").each(function(){y(this).css("float","none");y(this).css("width","100%")});y(".cmplz-help-modal").each(function(){y(this).hide();y(this).parent().height(0)});b.css("float","left");b.css("width","60%");if(!c.hasClass("cmplz-settings")){var e=b.height();if(d.height()>e){e=d.height()}e+=20;d.parent().height(e)}d.show()});y(".cmplz-color-picker").wpColorPicker({change:function(c,b){var a=y(c.target).data("hidden-input");y("#"+a).val(b.color.toString())}});y("#cmplz-support-form.hidden").hide().removeClass("hidden");y(document).on("click","#cmplz-support-link",function(a){a.preventDefault();var b=y("#cmplz-support-form");if(b.is(":visible")){b.slideUp()}else{b.slideDown()}});function E(){y(".multiple-field").each(function(){var a=true;y(this).find("input[type=text]").each(function(){if(y(this).val()===""){a=false}});y(this).find("textarea").each(function(){if(y(this).val()===""){a=false}});var b=y(this).closest(".cmplz-panel").find(".cmplz-multiple-field-validation i");if(a){b.removeClass("fa-times");b.addClass("fa-check")}else{b.addClass("fa-times");b.removeClass("fa-check")}})}E();y(document).on("keyup",".multiple-field input[type=text]",function(){E()});y(document).on("keyup",".multiple-field textarea",function(){E()});B();y(".cmplz-validate-multicheckbox .is-required:checkbox").change(B);function B(){y(".cmplz-validate-multicheckbox").each(function(a){var b=[];var d=true;y(this).find(":checkbox").each(function(e){b.push(y(this));if(y(this).is(":checked")){d=false}});var c=y(this).closest(".field-group").find(".cmplz-label");if(d){c.removeClass("valid-multicheckbox");c.addClass("invalid-multicheckbox");y.each(b,function(f,e){e.prop("required",true);e.addClass("is-required")})}else{c.removeClass("invalid-multicheckbox");c.addClass("valid-multicheckbox");y.each(b,function(f,e){e.prop("required",false);e.removeClass("is-required")})}});C()}s();y("input:radio").attr("required",true).click(s);function s(){y(".cmplz-validate-radio").each(function(a){var b=[];var d=true;y(this).find("input:radio").each(function(e){b.push(y(this));if(y(this).is(":checked")){d=false}});var c=y(this).closest(".field-group").find(".cmplz-label");if(d){c.removeClass("valid-radio");c.addClass("invalid-radio")}else{c.removeClass("invalid-radio");c.addClass("valid-radio")}});C()}C();y("input").change(function(a){C()});y("select").change(function(a){C()});y("textarea").change(function(a){C()});function C(){var b;var a=true;y(".condition-check").each(function(d){var e="cmplz_"+y(this).data("condition-question");var h="AND";if(e==undefined){return}var c=y(this).data("condition-answer");var f=y(this).find("input[type=checkbox]");if(!f.length){f=y(this).find("input")}if(!f.length){f=y(this).find("textarea")}if(!f.length){f=y(this).find("select")}if(f.length&&f[0].hasAttribute("required")){f.addClass("is-required")}c+="";if(c.indexOf("NOT ")!==-1){c=c.replace("NOT ","");a=false}else{a=true}var j=[];if(c.indexOf(" OR ")!==-1){j=c.split(" OR ");h="OR"}else{j=[c]}var g=y(this);var i=false;j.forEach(function(k){b=D(e);if(y("select[name="+e+"]").length){b=Array(y("select[name="+e+"]").val())}if(y("input[name='"+e+"["+k+"]']").length){if(y("input[name='"+e+"["+k+"]']").is(":checked")){i=true;b=[]}else{i=false;b=[]}}if(a){if(i||b.indexOf(k)!=-1||(b==k)){g.removeClass("hidden");if(f.hasClass("is-required")){f.prop("required",true)}if(h==="OR"){i=true}}else{g.addClass("hidden");if(f.hasClass("is-required")){f.prop("required",false)}if(h==="OR"){return}}}else{if(i||b.indexOf(k)!=-1||(b==k)){g.addClass("hidden");if(f.hasClass("is-required")){f.prop("required",false)}}else{g.removeClass("hidden");if(f.hasClass("is-required")){f.prop("required",true)}}}})})}function D(a){if(y("input[name^="+a+"]").attr("type")=="text"){return y("input[name^="+a+"]").val()}else{var b=[];y("input[name^="+a+"]:checked").each(function(){b[b.length]=y(this).val()});return b}}var r=10000;var H=complianz_admin.progress;var w=y(".cmplz-progress-bar");var v=y(".detected-cookies");var F;if(y("#cmplz-scan-progress").length){r=3000}function A(){var b=document.getElementById("cmplz_cookie_scan_frame");var a=b.contentDocument||b.contentWindow.document;if(!v.find(".cmplz-loader").length&&H<100){v.html('<div class="cmplz-loader"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>');v.addClass("loader")}b.onload=function(){if(H>=100){return}y.get(complianz_admin.admin_url,{action:"cmplz_get_scan_progress"},function(e){var c;if(e){c=jQuery.parseJSON(e);H=parseInt(c.progress);var d=c.next_page;if(H>=100){H=100;w.css({width:H+"%"});y.ajax({type:"GET",url:complianz_admin.admin_url,dataType:"json",data:({action:"load_detected_cookies"}),success:function(f){if(f.success){y(".detected-cookies").html(f.cookies);y(".detected-cookies.loader").removeClass("loader")}}})}else{w.css({width:H+"%"});y("#cmplz_cookie_scan_frame").attr("src",d);window.setTimeout(A,r)}}});return};window.setTimeout(A,r)}if(y("#cmplz_cookie_scan_frame").length){A()}w.css({width:H+"%"});y(document).on("click",".cmplz-add-to-policy",function(){var a=y(this).closest(".cmplz-slide-panel").find(".cmplz-title").html();var b=y(this).closest(".cmplz-slide-panel").find(".cmplz-panel-content").html();var c=t("cmplz_custom_privacy_policy_text");u(c+"<h3>"+a+"</h3>"+b,"cmplz_custom_privacy_policy_text");y(this).remove()});function t(b,a){if(typeof b=="undefined"){b=wpActiveEditor}if(typeof a=="undefined"){a=b}if(jQuery("#wp-"+b+"-wrap").hasClass("tmce-active")&&tinyMCE.get(b)){return tinyMCE.get(b).getContent()}else{return jQuery("#"+a).val()}}function u(c,b,a){if(typeof b=="undefined"){b=wpActiveEditor}if(typeof a=="undefined"){a=b}if(jQuery("#wp-"+b+"-wrap").hasClass("tmce-active")&&tinyMCE.get(b)){return tinyMCE.get(b).setContent(c)}else{return jQuery("#"+a).val(c)}}function G(b,a){if(typeof b=="undefined"){b=wpActiveEditor}if(typeof a=="undefined"){a=b}if(jQuery("#wp-"+b+"-wrap").hasClass("tmce-active")&&tinyMCE.get(b)){return tinyMCE.get(b).focus()}else{return jQuery("#"+a).focus()}}var z="#bar_pct_all_container";y(z).show();y(document).on("change","select[name=cmplz_region]",function(){y(z).hide();var a=y("select[name=cmplz_region]").val();var b=y("select[name=stats_type]").val();z="#bar_"+b+"_"+a+"_container";y(z).fadeIn()});y(document).on("change","select[name=stats_type]",function(){y(z).hide();var a="eu";if(y("select[name=cmplz_region]").length){a=y("select[name=cmplz_region]").val()}var b=y("select[name=stats_type]").val();z="#bar_"+b+"_"+a+"_container";y(z).fadeIn()});y(document).on("click","#cmplz-report-unknown-cookies",function(){y.ajax({type:"POST",url:complianz_admin.admin_url,dataType:"json",data:({action:"cmplz_report_unknown_cookies"}),success:function(a){console.log(a);if(a.success){y("#cmplz-report-unknown-cookies").hide();y("#cmplz-report-confirmation").show()}}})});function x(){if(y("#cmplz_anonymous_window_warning").length){var a=window.RequestFileSystem||window.webkitRequestFileSystem;if(!a){return}a(window.TEMPORARY,100,function(b){},function(b){y("#cmplz_anonymous_window_warning").show()})}if(y("#cmplz_adblock_warning").length){if(window.canRunAds===undefined){y("#cmplz_adblock_warning").show()}}}x()});