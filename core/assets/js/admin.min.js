jQuery(document).ready(function(l){"use strict";l(".cmplz-color-picker").wpColorPicker({change:function(e,i){var t=l(e.target).data("hidden-input");l("#"+t).val(i.color.toString())}}),l("#cmplz-support-form.hidden").hide().removeClass("hidden"),l(document).on("click","#cmplz-support-link",function(e){e.preventDefault();var i=l("#cmplz-support-form");i.is(":visible")?i.slideUp():i.slideDown()});var e=l(".cmplz-validate-multicheckbox .is-required:checkbox");function i(){l(".cmplz-validate-multicheckbox").each(function(e){var i=[],t=!0;l(this).find(":checkbox").each(function(e){i.push(l(this)),l(this).is(":checked")&&(t=!1)});var a=l(this).closest(".field-group").find(".cmplz-label");t?(a.removeClass("valid-multicheckbox"),a.addClass("invalid-multicheckbox"),l.each(i,function(e,i){i.prop("required",!0),i.addClass("is-required")})):(a.removeClass("invalid-multicheckbox"),a.addClass("valid-multicheckbox"),l.each(i,function(e,i){i.prop("required",!1),i.removeClass("is-required")}))}),n()}i(),e.change(i);var t=l("input:radio").attr("required",!0);function a(){l(".cmplz-validate-radio").each(function(e){var i=[],t=!0;l(this).find("input:radio").each(function(e){i.push(l(this)),l(this).is(":checked")&&(t=!1)});var a=l(this).closest(".field-group").find(".cmplz-label");t?(a.removeClass("valid-radio"),a.addClass("invalid-radio")):(a.removeClass("invalid-radio"),a.addClass("valid-radio"))}),n()}function n(){var r,d=!0;l(".condition-check").each(function(e){var i="cmplz_"+l(this).data("condition-question"),t="AND";if(null!=i){var a=l(this).data("condition-answer"),n=l(this).find("input[type=checkbox]");n.length||(n=l(this).find("input")),n.length||(n=l(this).find("textarea")),n.length||(n=l(this).find("select")),n.length&&n[0].hasAttribute("required")&&n.addClass("is-required"),-1!==(a+="").indexOf("NOT ")?(a=a.replace("NOT ",""),d=!1):d=!0;var c=[];-1!==a.indexOf(" OR ")?(c=a.split(" OR "),t="OR"):c=[a];var s=l(this),o=!1;c.forEach(function(e){if(r=function(e){{if("text"==l("input[name^="+e+"]").attr("type"))return l("input[name^="+e+"]").val();var i=[];return l("input[name^="+e+"]:checked").each(function(){i[i.length]=l(this).val()}),i}}(i),l("select[name="+i+"]").length&&(r=Array(l("select[name="+i+"]").val())),l("input[name='"+i+"["+e+"]']").length&&l("input[name='"+i+"["+e+"]']").is(":checked")&&(o=!0,r=[]),d){if(o||-1!=r.indexOf(e)||r==e)s.removeClass("hidden"),n.hasClass("is-required")&&n.prop("required",!0),"OR"===t&&(o=!0);else if(s.addClass("hidden"),n.hasClass("is-required")&&n.prop("required",!1),"OR"===t)return}else r!==e?(s.removeClass("hidden"),n.hasClass("is-required")&&n.prop("required",!0)):(s.addClass("hidden"),n.hasClass("is-required")&&n.prop("required",!1))})}})}a(),t.click(a),n(),l("input").change(function(e){n()}),l("select").change(function(e){n()}),l("textarea").change(function(e){n()});var c=1e3,s=complianz_admin.progress,o=l(".cmplz-progress-bar"),r=l(".detected-cookies");l("#cmplz_cookie_scan_frame").length&&function a(){var e=document.getElementById("cmplz_cookie_scan_frame");e.contentDocument||e.contentWindow.document;!r.find(".cmplz-loader").length&&s<100&&(r.html('<div class="cmplz-loader"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>'),r.addClass("loader")),e.onload=function(){100<=s||l.get(complianz_admin.admin_url,{action:"cmplz_get_scan_progress"},function(e){var i;if(e){i=jQuery.parseJSON(e),s=parseInt(i.progress);var t=i.next_page;100<=s?(s=100,o.css({width:s+"%"}),l.ajax({type:"GET",url:complianz_admin.admin_url,dataType:"json",data:{action:"load_detected_cookies"},success:function(e){e.success&&(l(".detected-cookies").html(e.cookies),l(".detected-cookies.loader").removeClass("loader"))}})):(o.css({width:s+"%"}),console.log("loading "+t),l("#cmplz_cookie_scan_frame").attr("src",t),window.setTimeout(a,c))}})},window.setTimeout(a,c)}(),o.css({width:s+"%"}),l(document).on("click",".cmplz-add-to-policy",function(){var e=l(this).closest(".cmplz-custom-privacy-text-container").find(".cmplz-custom-privacy-header").html(),i=l(this).closest(".cmplz-custom-privacy-text-container").find(".cmplz-custom-privacy-text").html();!function(e,i,t){void 0===i&&(i=wpActiveEditor);void 0===t&&(t=i);jQuery("#wp-"+i+"-wrap").hasClass("tmce-active")&&tinyMCE.get(i)?tinyMCE.get(i).setContent(e):jQuery("#"+t).val(e)}(function(e,i){void 0===e&&(e=wpActiveEditor);void 0===i&&(i=e);return jQuery("#wp-"+e+"-wrap").hasClass("tmce-active")&&tinyMCE.get(e)?tinyMCE.get(e).getContent():jQuery("#"+i).val()}("cmplz_custom_privacy_policy_text")+"<h3>"+e+"</h3>"+i,"cmplz_custom_privacy_policy_text")}),window.setTimeout(function(){l(".cmplz-notice.cmplz-success").fadeTo(500,0).slideUp(500,function(){l(this).remove()})},2e3);var d="#bar_pct_show_no_banner_container";l(document).on("change","select[name=eu]",function(){l(d).hide();var e=l("select[name=eu]").val(),i=l("select[name=stats_type]").val();l(d="#bar_"+i+"_"+e+"_container").fadeIn()}),l(document).on("change","select[name=stats_type]",function(){l(d).hide();var e="show_no_banner";l("select[name=eu]").length&&(e=l("select[name=eu]").val());var i=l("select[name=stats_type]").val();l(d="#bar_"+i+"_"+e+"_container").fadeIn()})});