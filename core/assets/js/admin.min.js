jQuery(document).ready(function(e){"use strict";function i(){e(".multiple-field").each(function(){var i=!0;e(this).find("input[type=text]").each(function(){""===e(this).val()&&(i=!1)}),e(this).find("textarea").each(function(){""===e(this).val()&&(i=!1)});var t=e(this).closest(".cmplz-panel").find(".cmplz-multiple-field-validation i");i?(t.removeClass("fa-times"),t.addClass("fa-check")):(t.addClass("fa-times"),t.removeClass("fa-check"))})}function t(){e(".cmplz-validate-multicheckbox").each(function(i){var t=[],n=!0;e(this).find(":checkbox").each(function(i){t.push(e(this)),e(this).is(":checked")&&(n=!1)});var a=e(this).closest(".field-group").find(".cmplz-label");n?(a.removeClass("valid-multicheckbox"),a.addClass("invalid-multicheckbox"),e.each(t,function(e,i){i.prop("required",!0),i.addClass("is-required")})):(a.removeClass("invalid-multicheckbox"),a.addClass("valid-multicheckbox"),e.each(t,function(e,i){i.prop("required",!1),i.removeClass("is-required")}))}),a()}function n(){e(".cmplz-validate-radio").each(function(i){var t=[],n=!0;e(this).find("input:radio").each(function(i){t.push(e(this)),e(this).is(":checked")&&(n=!1)});var a=e(this).closest(".field-group").find(".cmplz-label");n?(a.removeClass("valid-radio"),a.addClass("invalid-radio")):(a.removeClass("invalid-radio"),a.addClass("valid-radio"))}),a()}function a(){var i,t=!0;e(".condition-check").each(function(n){var a="cmplz_"+e(this).data("condition-question"),c="AND";if(void 0!=a){var s=e(this).data("condition-answer"),o=e(this).find("input[type=checkbox]");o.length||(o=e(this).find("input")),o.length||(o=e(this).find("textarea")),o.length||(o=e(this).find("select")),o.length&&o[0].hasAttribute("required")&&o.addClass("is-required"),-1!==(s+="").indexOf("NOT ")?(s=s.replace("NOT ",""),t=!1):t=!0;var l=[];-1!==s.indexOf(" OR ")?(l=s.split(" OR "),c="OR"):l=[s];var d=e(this),r=!1;l.forEach(function(n){if(i=function(i){{if("text"==e("input[name^="+i+"]").attr("type"))return e("input[name^="+i+"]").val();var t=[];return e("input[name^="+i+"]:checked").each(function(){t[t.length]=e(this).val()}),t}}(a),e("select[name="+a+"]").length&&(i=Array(e("select[name="+a+"]").val())),e("input[name='"+a+"["+n+"]']").length&&(e("input[name='"+a+"["+n+"]']").is(":checked")?(r=!0,i=[]):(r=!1,i=[])),t){if(r||-1!=i.indexOf(n)||i==n)d.removeClass("hidden"),o.hasClass("is-required")&&o.prop("required",!0),"OR"===c&&(r=!0);else if(d.addClass("hidden"),o.hasClass("is-required")&&o.prop("required",!1),"OR"===c)return}else r||-1!=i.indexOf(n)||i==n?(d.addClass("hidden"),o.hasClass("is-required")&&o.prop("required",!1)):(d.removeClass("hidden"),o.hasClass("is-required")&&o.prop("required",!0))})}})}e(document).on("click",".cmplz-tablinks",function(){e(".cmplz-tablinks").removeClass("active"),e(this).addClass("active"),e(".cmplz-tabcontent").removeClass("active"),e("#"+e(this).data("tab")).addClass("active")}),window.setTimeout(function(){e(".cmplz-hide").fadeTo(500,0).slideUp(500,function(){e(this).remove()})},2e3),e(document).on("click",".cmplz-panel-toggle",function(){var i=e(this).closest(".cmplz-slide-panel").find(".cmplz-panel-content"),t=e(this).closest(".cmplz-slide-panel").find("i.toggle");i.is(":hidden")?(t.removeClass("fa-caret-right"),t.addClass("fa-caret-down"),i.slideDown("fast")):(i.slideUp("fast"),t.removeClass("fa-caret-down"),t.addClass("fa-caret-right"))}),e(document).on("click",".cmplz-open-modal",function(i){i.preventDefault();var t=e(this).closest(".field-group"),n=t.find(".cmplz-field"),a=t.find(".cmplz-help-modal");if(e(".cmplz-field").each(function(){e(this).css("float","none"),e(this).css("width","100%")}),e(".cmplz-help-modal").each(function(){e(this).hide(),e(this).parent().height(0)}),n.css("float","left"),n.css("width","60%"),!t.hasClass("cmplz-settings")){var c=n.height();a.height()>c&&(c=a.height()),c+=20,a.parent().height(c)}a.show()}),e(".cmplz-color-picker").wpColorPicker({change:function(i,t){var n=e(i.target).data("hidden-input");e("#"+n).val(t.color.toString())}}),e("#cmplz-support-form.hidden").hide().removeClass("hidden"),e(document).on("click","#cmplz-support-link",function(i){i.preventDefault();var t=e("#cmplz-support-form");t.is(":visible")?t.slideUp():t.slideDown()}),i(),e(document).on("keyup",".multiple-field input[type=text]",function(){i()}),e(document).on("keyup",".multiple-field textarea",function(){i()}),t(),e(".cmplz-validate-multicheckbox .is-required:checkbox").change(t),n(),e("input:radio").attr("required",!0).click(n),a(),e("input").change(function(e){a()}),e("select").change(function(e){a()}),e("textarea").change(function(e){a()});var c=1e4,s=complianz_admin.progress,o=e(".cmplz-progress-bar"),l=e(".detected-cookies");e("#cmplz-scan-progress").length&&(c=3e3),e("#cmplz_cookie_scan_frame").length&&function i(){var t=document.getElementById("cmplz_cookie_scan_frame");t.contentDocument||t.contentWindow.document;!l.find(".cmplz-loader").length&&s<100&&(l.html('<div class="cmplz-loader"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>'),l.addClass("loader")),t.onload=function(){s>=100||e.get(complianz_admin.admin_url,{action:"cmplz_get_scan_progress"},function(t){var n;if(t){n=jQuery.parseJSON(t),s=parseInt(n.progress);var a=n.next_page;s>=100?(s=100,o.css({width:s+"%"}),e.ajax({type:"GET",url:complianz_admin.admin_url,dataType:"json",data:{action:"load_detected_cookies"},success:function(i){i.success&&(e(".detected-cookies").html(i.cookies),e(".detected-cookies.loader").removeClass("loader"))}})):(o.css({width:s+"%"}),e("#cmplz_cookie_scan_frame").attr("src",a),window.setTimeout(i,c))}})},window.setTimeout(i,c)}(),o.css({width:s+"%"}),e(document).on("click",".cmplz-add-to-policy",function(){var i=e(this).closest(".cmplz-slide-panel").find(".cmplz-title").html(),t=e(this).closest(".cmplz-slide-panel").find(".cmplz-panel-content").html();!function(e,i,t){void 0===i&&(i=wpActiveEditor);void 0===t&&(t=i);jQuery("#wp-"+i+"-wrap").hasClass("tmce-active")&&tinyMCE.get(i)?tinyMCE.get(i).setContent(e):jQuery("#"+t).val(e)}(function(e,i){void 0===e&&(e=wpActiveEditor);void 0===i&&(i=e);return jQuery("#wp-"+e+"-wrap").hasClass("tmce-active")&&tinyMCE.get(e)?tinyMCE.get(e).getContent():jQuery("#"+i).val()}("cmplz_custom_privacy_policy_text")+"<h3>"+i+"</h3>"+t,"cmplz_custom_privacy_policy_text"),e(this).remove()});var d="#bar_pct_all_container";e(d).show(),e(document).on("change","select[name=cmplz_region]",function(){e(d).hide();var i=e("select[name=cmplz_region]").val(),t=e("select[name=stats_type]").val();e(d="#bar_"+t+"_"+i+"_container").fadeIn()}),e(document).on("change","select[name=stats_type]",function(){e(d).hide();var i="eu";e("select[name=cmplz_region]").length&&(i=e("select[name=cmplz_region]").val());var t=e("select[name=stats_type]").val();e(d="#bar_"+t+"_"+i+"_container").fadeIn()}),e(document).on("click","#cmplz-report-unknown-cookies",function(){e.ajax({type:"POST",url:complianz_admin.admin_url,dataType:"json",data:{action:"cmplz_report_unknown_cookies"},success:function(i){console.log(i),i.success&&(e("#cmplz-report-unknown-cookies").hide(),e("#cmplz-report-confirmation").show())}})}),function(){if(e("#cmplz_anonymous_window_warning").length){var i=window.RequestFileSystem||window.webkitRequestFileSystem;if(!i)return;i(window.TEMPORARY,100,function(e){},function(i){e("#cmplz_anonymous_window_warning").show()})}e("#cmplz_adblock_warning").length&&void 0===window.canRunAds&&e("#cmplz_adblock_warning").show()}()});