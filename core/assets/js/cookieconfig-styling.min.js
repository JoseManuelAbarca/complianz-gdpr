jQuery(document).ready(function(e){var d=b("variation_id");if(!d||d==null){d=""}e(document).on("click","input[name='cmplz_a_b_testing']",function(){e("#cookie-settings").submit()});e(document).on("click",".cmplz_delete_variation",function(){var g=e(this);var h=g.data("id");e.ajax({type:"POST",url:complianz.url,dataType:"json",data:({action:"cmplz_delete_variation",variation_id:h}),success:function(j){if(j.success){g.closest(".cmplz-panel").remove();if(h==d){e(".cmplz-tabcontent").each(function(){e(this).remove()});e(".cmplz-tab").remove()}}}})});var a;e(".cmplz-color-picker").wpColorPicker({change:function(g,h){var j=e(g.target).data("hidden-input");e("#"+j).val(h.color.toString());c()}});e(document).on("keyup","input[name=cmplz_dismiss"+d+"]",function(){e(".cc-dismiss").html(e(this).val())});e(document).on("keyup","input[name=cmplz_accept"+d+"]",function(){e(".cc-allow").html(e(this).val())});e(document).on("keyup","input[name=cmplz_accept_informational"+d+"]",function(){e(".cc-dismiss").html(e(this).val())});e(document).on("keyup","input[name=cmplz_revoke"+d+"]",function(){e(".cc-revoke").html(e(this).val())});e(document).on("keyup","input[name=cmplz_readmore_privacy"+d+"]",function(){e(".cc-link.privacy-policy").html(e(this).val())});e(document).on("keyup","input[name=cmplz_view_preferences"+d+"]",function(){e(".cc-revoke").html(e(this).val())});e(document).on("keyup","input[name=cmplz_category_functional"+d+"]",function(){e(".cc-functional").html(e(this).val())});e(document).on("keyup","input[name=cmplz_category_stats"+d+"]",function(){e(".cc-stats").html(e(this).val())});e(document).on("keyup","input[name=cmplz_category_all"+d+"]",function(){e(".cc-all").html(e(this).val())});e(document).on("keyup","input[name=cmplz_readmore"+d+"]",function(){e(".cc-link.cookie-policy").html(e(this).val())});e(document).on("keyup","input[name=cmplz_readmore_us"+d+"]",function(){e(".cc-link.cookie-policy").html(e(this).val())});e(document).on("keyup","textarea[name=cmplz_tagmanager_categories"+d+"]",function(){c()});setTimeout(function(){for(var g=0;g<tinymce.editors.length;g++){tinymce.editors[g].on("NodeChange keyup",function(h,l){var k=e(".cc-message").find("a").html();var m="cmplz_message"+d;var n="cmplz_message"+d;if(typeof m=="undefined"){m=wpActiveEditor}if(typeof n=="undefined"){n=m}if(jQuery("#wp-"+m+"-wrap").hasClass("tmce-active")&&tinyMCE.get(m)){var j=tinyMCE.get(m).getContent()}else{var j=jQuery("#"+n).val()}j=j.replace(/<[\/]{0,1}(p)[^><]*>/ig,"");e(".cc-message").html(j+'<a href="#" class="cc-link cookie-policy">'+k+"</a>")})}},1000);e(document).on("change","select[name=cmplz_static"+d+"]",function(){c()});e(document).on("change","select[name=cmplz_position"+d+"]",function(){c()});e(document).on("change","select[name=cmplz_theme"+d+"]",function(){c()});e(document).on("keyup","#cmplz_custom_css"+d+"editor",function(){f()});e(document).on("click",".region-link",function(){ccRegion=e(this).data("tab");c()});e(document).on("change","input[name=cmplz_use_custom_cookie_css"+d+"]",function(){var g=e("input[name=cmplz_use_custom_cookie_css"+d+"]").is(":checked");if(g){f()}else{e("#cmplz-cookie-inline-css").remove()}});function f(){e('<style id="cmplz-cookie-inline-css">').prop("type","text/css").html(e('textarea[name="cmplz_custom_css'+d+'"]').val()).appendTo("head")}e(document).on("change","input[name=cmplz_use_categories"+d+"]",function(){c()});e(document).on("change","input[name=cmplz_hide_revoke"+d+"]",function(){c()});e(document).on("change","input[name=cmplz_use_tagmanager_categories"+d+"]",function(){c()});c();function c(){var L;if(a){a.fadeOut();a.destroy()}console.log(ccRegion);if(ccRegion==="eu"){console.log("regino EU");L=e("input[name=cmplz_dismiss"+d+"]").val()}else{console.log("region US");L=e("input[name=cmplz_accept_informational"+d+"]").val()}var C=e("input[name=cmplz_use_categories"+d+"]").is(":checked");var K=e("input[name=cmplz_hide_revoke"+d+"]").is(":checked");if(K){K="cc-hidden"}else{K=""}var x=e("textarea[name=cmplz_message"+d+"]").val();var r=e("input[name=cmplz_accept"+d+"]").val();var E=e("input[name=cmplz_readmore"+d+"]").val();var J=false;var B=e("input[name=cmplz_border_color"+d+"]").val();var k=e("select[name=cmplz_position"+d+"]").val();var y="opt-in";var s="";if(ccRegion==="us"){E=e("input[name=cmplz_readmore_us"+d+"]").val();y="opt-out";C=false;if(e("input[name=cmplz_readmore_privacy"+d+"]").length){s='&nbsp;-&nbsp;<a aria-label="learn more about privacy" tabindex="0" class="cc-link privacy-policy" href="#">'+e("input[name=cmplz_readmore_privacy"+d+"]").val()+"</a>"}}var p=e("select[name=cmplz_theme"+d+"]").val();var I="basic";var z=e("input[name=cmplz_popup_text_color"+d+"]").val();var v=e("input[name=cmplz_button_background_color"+d+"]").val();var q=e("input[name=cmplz_button_text_color"+d+"]").val();var F=e("input[name=cmplz_save_preferences"+d+"]").val();var t=e("input[name=cmplz_view_preferences"+d+"]").val();var G=e("input[name=cmplz_category_stats"+d+"]").val();var D=e("input[name=cmplz_revoke"+d+"]").val();var w="";var h="";var g="";if(C){var n=e("textarea[name=cmplz_tagmanager_categories"+d+"]").length;var l=e("textarea[name=cmplz_tagmanager_categories"+d+"]").val();var u=!n&&e("input[name=cmplz_cookie_warning_required_stats]").val();h=e("input[name=cmplz_category_functional"+d+"]").val();g=e("input[name=cmplz_category_all"+d+"]").val();var j='<input type="checkbox" id="cmplz_all" style="display: none;"><label for="cmplz_all" class="cc-check"><svg width="18px" height="18px" viewBox="0 0 18 18"> <path d="M1,9 L1,3.5 C1,2 2,1 3.5,1 L14.5,1 C16,1 17,2 17,3.5 L17,14.5 C17,16 16,17 14.5,17 L3.5,17 C2,17 1,16 1,14.5 L1,9 Z"></path> <polyline points="1 9 7 14 15 4"></polyline></svg></label>';var o="";var m=j.replace("type","checked disabled type");m=m.replace(/cmplz_all/g,"cmplz_functional");w="<label>"+m+'<span class="cc-functional cc-category">{{categoryfunctional}}</span></label>';y="categories";I="categories-layout";D=t;if(u){w+="<label>"+j.replace(/cmplz_all/g,"cmplz_stats")+'<span class="cc-stats cc-category">'+G+"</span></label>"}if(n){var H=l.split(",");H.forEach(function(O,N){if(O.length>0){var M=j.replace(/cmplz_all/g,"cmplz_"+N);w+="<label>"+M+'<span class="cc-tm cc-category">'+O.trim()+"</span></label>"}});w+="<label>"+j+'<span class="cc-all cc-category">{{categoryall}}</span></label>'}else{w+="<label>"+j+'<span class="cc-all cc-category">{{categoryall}}</span></label>'}}if(k==="static"){J=true;k="top"}if(p==="edgeless"){B=false}var A;window.cookieconsent.initialise({cookie:{name:"complianz_config",expiryDays:1},revokeBtn:'<div class="cc-revoke '+K+' {{classes}}">'+D+"</div>",palette:{popup:{background:e("input[name=cmplz_popup_background_color"+d+"]").val(),text:z},button:{background:v,text:q,border:B}},layout:I,layouts:{"categories-layout":"{{messagelink}}{{categories-checkboxes}}{{compliance}}"},elements:{"categories-checkboxes":w,save:'<a aria-label="save cookies" tabindex="0" class="cc-btn cc-save">{{save_preferences}}</a>',messagelink:'<span id="cookieconsent:desc" class="cc-message">{{message}} <a aria-label="learn more about cookies" tabindex="0" class="cc-link cookie-policy" href="{{href}}" target="_blank">{{link}}</a>'+s+"</span>"},type:y,compliance:{categories:'<div class="cc-compliance cc-highlight">{{save}}</div>'},theme:p,"static":J,position:k,content:{save_preferences:F,message:x,dismiss:L,deny:"",allow:r,link:E,href:"#",categoryfunctional:h,categoryall:g},onInitialise:function(M){A=M}},function(M){a=M;a.open();if(e("#cmplz_functional").length){if(A==="allow"){e("#cmplz_all").prop("checked",true)}e("#cmplz_functional:checked + .cc-check svg").css({stroke:z});e("#cmplz_all:checked + .cc-check svg").css({stroke:z});for(i=0;i<5;i++){e("#cmplz_"+i+":checked + .cc-check svg").css({stroke:z})}e(".cc-save").css({"border-color":B,"background-color":v,color:q});e(".cc-check svg").css({stroke:z})}});e(document).on("click",".cc-save",function(){if(e("#cmplz_all").is(":checked")){a.setStatus(cookieconsent.status.allow)}else{a.setStatus(cookieconsent.status.dismiss)}a.close();e(".cc-revoke").fadeIn()});if(k==="top"){e(".cc-window").css({top:"30px"})}if(k==="static"){e(".cc-grower").css("z-index",10);e(".cc-grower").css("position","relative")}}function b(g){var j=window.location.search.substring(1);var k=j.split("&");for(var h=0;h<k.length;h++){var l=k[h].split("=");if(l[0]==g){return l[1]}}return false}});