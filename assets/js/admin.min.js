jQuery(document).ready(function(o){"use strict";o(".cmplz-color-picker").wpColorPicker({change:function(e,t){var i=o(e.target).data("hidden-input");o("#"+i).val(t.color.toString())}}),o("#cmplz-support-form.hidden").hide().removeClass("hidden"),o(document).on("click","#cmplz-support-link",function(e){e.preventDefault();var t=o("#cmplz-support-form");t.is(":visible")?t.slideUp():t.slideDown()});var e=o(".cmplz-validate-multicheckbox .is-required:checkbox");function t(){e.is(":checked")?(e.prop("required",!1),e.removeClass("is-required")):(e.prop("required",!0),e.addClass("is-required")),i()}function i(){var a,s=!0;o(".condition-check").each(function(e){var t="cmplz_"+o(this).data("condition-question");if(null!=t){var i=o(this).data("condition-answer"),n=o(this).find("input[type=checkbox]");n.length||(n=o(this).find("input")),n.length||(n=o(this).find("textarea")),n.length||(n=o(this).find("select")),n.length&&n[0].hasAttribute("required")&&n.addClass("is-required"),-1!=(i+="").indexOf("NOT ")?(i=i.replace("NOT ",""),s=!1):s=!0,a=function(e){{if("text"==o("input[name^="+e+"]").attr("type"))return o("input[name^="+e+"]").val();var t=[];return o("input[name^="+e+"]:checked").each(function(){t[t.length]=o(this).val()}),t}}(t);var c=!1;o("select[name="+t+"]").length&&(a=Array(o("select[name="+t+"]").val())),o("input[name='"+t+"["+i+"]']").length&&o("input[name='"+t+"["+i+"]']").is(":checked")&&(c=!0,a=[]),s?c||-1!=a.indexOf(i)||a==i?(o(this).removeClass("hidden"),n.hasClass("is-required")&&n.prop("required",!0)):(o(this).addClass("hidden"),n.hasClass("is-required")&&n.prop("required",!1)):a!=i?(o(this).removeClass("hidden"),n.hasClass("is-required")&&n.prop("required",!0)):(o(this).addClass("hidden"),n.hasClass("is-required")&&n.prop("required",!1))}})}t(),e.change(t),i(),o("input").change(function(e){i()}),o("select").change(function(e){i()}),o("textarea").change(function(e){i()});var c=1e3,a=complianz_admin.progress,s=o(".cmplz-progress-bar"),r=o(".detected-cookies");o("#cmplz_cookie_scan_frame").length&&function n(){var e=document.getElementById("cmplz_cookie_scan_frame");e.contentDocument||e.contentWindow.document;!r.find(".cmplz-loader").length&&a<100&&(r.html('<div class="cmplz-loader"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>'),r.addClass("loader")),e.onload=function(){100<=a||o.get(complianz_admin.admin_url,{action:"cmplz_get_scan_progress"},function(e){var t;if(e){t=jQuery.parseJSON(e),a=parseInt(t.progress);var i=t.next_page;100<=a?(a=100,s.css({width:a+"%"}),o.ajax({type:"GET",url:complianz_admin.admin_url,dataType:"json",data:{action:"load_detected_cookies"},success:function(e){e.success&&(o(".detected-cookies").html(e.cookies),o(".detected-cookies.loader").removeClass("loader"))}})):(s.css({width:a+"%"}),console.log("loading "+i),o("#cmplz_cookie_scan_frame").attr("src",i),window.setTimeout(n,c))}})},window.setTimeout(n,c)}(),s.css({width:a+"%"}),o(document).on("click",".cmplz-add-to-policy",function(){var e=o(this).closest(".cmplz-custom-privacy-text-container").find(".cmplz-custom-privacy-header").html(),t=o(this).closest(".cmplz-custom-privacy-text-container").find(".cmplz-custom-privacy-text").html();!function(e,t,i){void 0===t&&(t=wpActiveEditor);void 0===i&&(i=t);jQuery("#wp-"+t+"-wrap").hasClass("tmce-active")&&tinyMCE.get(t)?tinyMCE.get(t).setContent(e):jQuery("#"+i).val(e)}(function(e,t){void 0===e&&(e=wpActiveEditor);void 0===t&&(t=e);return jQuery("#wp-"+e+"-wrap").hasClass("tmce-active")&&tinyMCE.get(e)?tinyMCE.get(e).getContent():jQuery("#"+t).val()}("cmplz_custom_privacy_policy_text")+"<h3>"+e+"</h3>"+t,"cmplz_custom_privacy_policy_text")}),window.setTimeout(function(){o(".cmplz-notice.cmplz-success").fadeTo(500,0).slideUp(500,function(){o(this).remove()})},2e3);var n="#bar_pct_show_non_eu_container";o(document).on("change","select[name=eu]",function(){o(n).hide();var e=o("select[name=eu]").val(),t=o("select[name=stats_type]").val();o(n="#bar_"+t+"_"+e+"_container").fadeIn()}),o(document).on("change","select[name=stats_type]",function(){o(n).hide();var e=o("select[name=eu]").val(),t=o("select[name=stats_type]").val();o(n="#bar_"+t+"_"+e+"_container").fadeIn()})});